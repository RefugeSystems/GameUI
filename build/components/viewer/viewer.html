
<div class="rs-component component-viewer">

	<div class="map" v-if="location && sourceImage">
		<div class="view" onexit="true" v-on:mousemove.stop="dragging($event)" v-on:click.stop.prevent="clicking($event)" v-on:mousedown.stop.prevent="down($event)" v-on:mouseup.stop.prevent="up($event)" v-on:mousewheel.stop.prevent="wheeling($event)" v-on:mouseleave="out($event)">
			<!-- <div class="shadow"></div> -->
			<div class="parchment" v-on:contextmenu.stop.prevent="openActions($event)" v-on:click.right.stop.prevent="openActions($event)">
				<div class="pointsOfInterest" v-if="pins && pointsOfInterest && pointsOfInterest.length">
					
				</div>
				<div class="coordinates" v-for="coordinate in location.coordinates">
					<span class="coordinate top left" :style="'width: ' + coordinate.x + '%; height: ' + coordinate.y + '%;' + (coordinate.color?'border-color: ' + coordinate.color + ';':'')"></span>
					<span class="coordinate bottom right" :style="'left: ' + coordinate.x + '%; width: ' + (100-coordinate.x) + '%; top: ' + coordinate.y + '%; height: ' + (100-coordinate.y) + '%;' + (coordinate.color?'border-color: ' + coordinate.color + ';':'')"></span>
				</div>
				<div class="coordinate-dots">
					<button class="dot" v-for="coordinate in location.coordinates" :style="'left: ' + coordinate.x + '%; top: ' + coordinate.y + '%;' + (coordinate.color?'background-color: ' + coordinate.color + ';':'')" v-on:click="dismissCoordinate(coordinate)"></button>
				</div>
				<div class="actions" v-if="actions.open" :style="'left: ' + actions.x + 'px; top: ' + actions.y + ';'">
					<div class="actions-header">
						<span>
							{{actions.header}}
						</span>
						<button class="actions-close" v-on:click.stop.prevent="closeActions()">
							<span class="fas fa-times"></span>
						</button>
					</div>
					<div class="actions-options">
						<button class="option" v-for="option in actions.options" v-on:click.stop.prevent="fire(option, $event)">
							<span :class="option.icon || 'fas fa-chevron-square-right'"></span>
							<span>{{option.text}}</span>
						</button>
						<input type="text" v-model="alter" v-if="player.master"/>
					</div>
				</div>
				<img :src="sourceImage" draggable="false" />
			</div>
		</div>
	</div>


	<div class="menu" :class="menuOpen?'open':'closed'">
		<button class="toggle" v-on:click="toggleMenu()">
			<span class="fas" :class="menuOpen?'fa-caret-square-up':'fa-caret-square-down'"></span>
		</button>
		<div class="menu-items flow-v">
			<button class="control back" v-on:click="processAction(menuItem)" v-for="menuItem in menuItems" :class="menuItem.action">
				<span class="icon" :class="menuItem.icon"></span>
				<span class="text">{{menuItem.text}}</span>
			</button>
		</div>
	</div>
</div>
